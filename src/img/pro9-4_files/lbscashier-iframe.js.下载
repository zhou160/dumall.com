!function(){!function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,i,a,o,s=gap,c=e[t];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(t)),"function"==typeof rep&&(c=rep.call(e,t,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(c)){for(a=c.length,n=0;a>n;n+=1)o[n]=str(n,c)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;a>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,c),i&&o.push(quote(r)+(gap?": ":":")+i));else for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(i=str(r,c),i&&o.push(quote(r)+(gap?": ":":")+i));return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,i}}if("object"!=typeof JSON)var JSON=window.JSON={};"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;return"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,i=t[e];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(t,e,i)}var j;return text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?(j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j):{};var funcName}),window.JSON}(),!function(){function t(t){return r(n(o(t)))}function e(t,e){return a(n(o(t)),e)}function n(t){return c(u(s(t),8*t.length))}function r(t){try{}catch(e){m=0}for(var n,r=m?"0123456789ABCDEF":"0123456789abcdef",i="",a=0;a<t.length;a++)n=t.charCodeAt(a),i+=r.charAt(n>>>4&15)+r.charAt(15&n);return i}function i(t){try{}catch(e){w=""}for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",i=t.length,a=0;i>a;a+=3)for(var o=t.charCodeAt(a)<<16|(i>a+1?t.charCodeAt(a+1)<<8:0)|(i>a+2?t.charCodeAt(a+2):0),s=0;4>s;s++)r+=8*a+6*s>8*t.length?w:n.charAt(o>>>6*(3-s)&63);return r}function a(t,e){var n,r,i,a,o,s=e.length,c=Array(Math.ceil(t.length/2));for(n=0;n<c.length;n++)c[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);var u=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),f=Array(u);for(r=0;u>r;r++){for(o=Array(),a=0,n=0;n<c.length;n++)a=(a<<16)+c[n],i=Math.floor(a/s),a-=i*s,(o.length>0||i>0)&&(o[o.length]=i);f[r]=a,c=o}var h="";for(n=f.length-1;n>=0;n--)h+=e.charAt(f[n]);return h}function o(t){for(var e,n,r="",i=-1;++i<t.length;)e=t.charCodeAt(i),n=i+1<t.length?t.charCodeAt(i+1):0,e>=55296&&56319>=e&&n>=56320&&57343>=n&&(e=65536+((1023&e)<<10)+(1023&n),i++),127>=e?r+=String.fromCharCode(e):2047>=e?r+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?r+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(r+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return r}function s(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(var n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e}function c(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e}function u(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,r=-271733879,i=-1732584194,a=271733878,o=0;o<t.length;o+=16){var s=n,c=r,u=i,f=a;n=h(n,r,i,a,t[o+0],7,-680876936),a=h(a,n,r,i,t[o+1],12,-389564586),i=h(i,a,n,r,t[o+2],17,606105819),r=h(r,i,a,n,t[o+3],22,-1044525330),n=h(n,r,i,a,t[o+4],7,-176418897),a=h(a,n,r,i,t[o+5],12,1200080426),i=h(i,a,n,r,t[o+6],17,-1473231341),r=h(r,i,a,n,t[o+7],22,-45705983),n=h(n,r,i,a,t[o+8],7,1770035416),a=h(a,n,r,i,t[o+9],12,-1958414417),i=h(i,a,n,r,t[o+10],17,-42063),r=h(r,i,a,n,t[o+11],22,-1990404162),n=h(n,r,i,a,t[o+12],7,1804603682),a=h(a,n,r,i,t[o+13],12,-40341101),i=h(i,a,n,r,t[o+14],17,-1502002290),r=h(r,i,a,n,t[o+15],22,1236535329),n=p(n,r,i,a,t[o+1],5,-165796510),a=p(a,n,r,i,t[o+6],9,-1069501632),i=p(i,a,n,r,t[o+11],14,643717713),r=p(r,i,a,n,t[o+0],20,-373897302),n=p(n,r,i,a,t[o+5],5,-701558691),a=p(a,n,r,i,t[o+10],9,38016083),i=p(i,a,n,r,t[o+15],14,-660478335),r=p(r,i,a,n,t[o+4],20,-405537848),n=p(n,r,i,a,t[o+9],5,568446438),a=p(a,n,r,i,t[o+14],9,-1019803690),i=p(i,a,n,r,t[o+3],14,-187363961),r=p(r,i,a,n,t[o+8],20,1163531501),n=p(n,r,i,a,t[o+13],5,-1444681467),a=p(a,n,r,i,t[o+2],9,-51403784),i=p(i,a,n,r,t[o+7],14,1735328473),r=p(r,i,a,n,t[o+12],20,-1926607734),n=l(n,r,i,a,t[o+5],4,-378558),a=l(a,n,r,i,t[o+8],11,-2022574463),i=l(i,a,n,r,t[o+11],16,1839030562),r=l(r,i,a,n,t[o+14],23,-35309556),n=l(n,r,i,a,t[o+1],4,-1530992060),a=l(a,n,r,i,t[o+4],11,1272893353),i=l(i,a,n,r,t[o+7],16,-155497632),r=l(r,i,a,n,t[o+10],23,-1094730640),n=l(n,r,i,a,t[o+13],4,681279174),a=l(a,n,r,i,t[o+0],11,-358537222),i=l(i,a,n,r,t[o+3],16,-722521979),r=l(r,i,a,n,t[o+6],23,76029189),n=l(n,r,i,a,t[o+9],4,-640364487),a=l(a,n,r,i,t[o+12],11,-421815835),i=l(i,a,n,r,t[o+15],16,530742520),r=l(r,i,a,n,t[o+2],23,-995338651),n=d(n,r,i,a,t[o+0],6,-198630844),a=d(a,n,r,i,t[o+7],10,1126891415),i=d(i,a,n,r,t[o+14],15,-1416354905),r=d(r,i,a,n,t[o+5],21,-57434055),n=d(n,r,i,a,t[o+12],6,1700485571),a=d(a,n,r,i,t[o+3],10,-1894986606),i=d(i,a,n,r,t[o+10],15,-1051523),r=d(r,i,a,n,t[o+1],21,-2054922799),n=d(n,r,i,a,t[o+8],6,1873313359),a=d(a,n,r,i,t[o+15],10,-30611744),i=d(i,a,n,r,t[o+6],15,-1560198380),r=d(r,i,a,n,t[o+13],21,1309151649),n=d(n,r,i,a,t[o+4],6,-145523070),a=d(a,n,r,i,t[o+11],10,-1120210379),i=d(i,a,n,r,t[o+2],15,718787259),r=d(r,i,a,n,t[o+9],21,-343485551),n=g(n,s),r=g(r,c),i=g(i,u),a=g(a,f)}return Array(n,r,i,a)}function f(t,e,n,r,i,a){return g(y(g(g(e,t),g(r,a)),i),n)}function h(t,e,n,r,i,a,o){return f(e&n|~e&r,t,e,i,a,o)}function p(t,e,n,r,i,a,o){return f(e&r|n&~r,t,e,i,a,o)}function l(t,e,n,r,i,a,o){return f(e^n^r,t,e,i,a,o)}function d(t,e,n,r,i,a,o){return f(n^(e|~r),t,e,i,a,o)}function g(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function y(t,e){return t<<e|t>>>32-e}var m=0,w="";return window.WalletCashierEncrypt={base64:i,md5:t,hex_md5:t,any_md5:e}}(),!function(){var t=(window.WalletCashierEncrypt,window.jSON),e=window.jQuery,n={getQueryString:function(t){function e(t){try{return window.decodeURIComponent(t)}catch(e){return t}}"string"==typeof t&&(-1!==t.indexOf("?")&&(t=t.split("?")[1]),t=t.split("&"));for(var n={},r=0,i=t.length;i>r;r++){var a=t[r].split("=");if(a.length>2){var o=a.shift();a.join("="),a=[o,a.join("=")]}2===a.length&&(n[e(a[0])]=e(a[1]))}return n},keys:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},fixListMargin:function(t){var n=t.list,r=n.length,i=r,a="undefined"==typeof t.need_clear_scroll?!0:t.need_clear_scroll,o=0,s=0;try{o=t.content_width||n.parent().get(0).clientWidth-(a?30:0),s=t.item_width||n.get(0).offsetWidth}catch(c){}var u=t.margin||15;return u*(r-1)+s*r>o&&(i=Math.floor((o-u)/s)),e.each(n,function(t){(t+1)%i===0?e(this).css("margin-right",0):e(this).css("margin-right","")}),{limit:i,content_width:o,item_width:s}},indexOf:function(){var t=[],e=null;return e=t.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){var n,r=t.length;for(n=0;r>n;n++)if(e===t[n])return n;return-1}}(),isFunction:function(t){return"function"===this.type(t)},filter:function(t,e){var n,r=[],i=t.length;for(n=0;i>n;n++)e.call(t[n],t[n],n,t)&&r.push(t[n]);return r},each:function(t,e,n){var r,i=0,a=t.length,o=void 0===a||this.isFunction(t);if(n)if(o){for(r in t)if(e.apply(t[r],n)===!1)break}else for(;a>i&&e.apply(t[i++],n)!==!1;);else if(o){for(r in t)if(e.call(t[r],r,t[r])===!1)break}else for(;a>i&&e.call(t[i],i,t[i++])!==!1;);return t},fenToYuan:function(t,e){return"undefined"==typeof e&&(e=2),parseFloat((t/100).toFixed(e))},formatResult:function(t){if("string"===n.type(t))return{ret:0,msg:t,content:{}};if("number"===n.type(t))return{ret:t,msg:"",content:{}};var e={ret:99999,msg:"服务器正忙，请稍后重试。",content:{}};if(t=t||e,"undefined"!=typeof t.code||"undefined"!=typeof t.err||"undefined"!=typeof t.result||"undefined"!=typeof t.err_code||"undefined"!=typeof t.errno||"undefined"!=typeof t.err_no){var r={};r.ret=t.err||t.result||t.err_code||t.errno||t.code||t.err_no||0,r.msg=t.msg||t.errmsg||t.result_string||t.err_msg||t.err_desc||"",r.token=t.token||"",r.content=t.data||t.cnt||t;var i=["ret","result","err_code","errno","err_no","err","msg","errmsg","result_string","err_msg","err_desc","token","code","cnt"];this.each(i,function(t,e){"undefined"!=typeof r.content[e]&&delete r.content[e]}),t=r}var a=parseInt(t.ret,10);isNaN(a)&&(t=e,a=t.ret);var o={};return("array"===this.type(t.content)||"array"===this.type(t.errContent)||"array"===this.type(t.content.data))&&(o=[]),t.content="string"===this.type(t.content)||"string"===this.type(t.errContent)||"string"===this.type(t.content.data)?t.content||t.errContent||t.content.data:this.extend(o,t.content,t.errContent,t.content.data),this.extend(!0,{},t,{ret:a,msg:"undefined"!=typeof t.msg?t.msg:e.msg})},getFormInputHtml:function(e){var r=[],i=e.params||{};return n.each(i,function(n,i){n=e.paramsMap&&e.paramsMap[n]||n;try{"object"==typeof i&&(i=t.stringify(i))}catch(a){}r.push("<input type='hidden' name='"+n+"' value='"+i+"'/>")}),r.join("")},isArray:Array.isArray||function(t){return"array"===this.type(t)},isPlainObject:function(t){if(!t||"object"!==this.type(t)||t.nodeType||null!=t&&t==t.window)return!1;try{if(t.constructor&&!Object.prototype.hasOwnProperty.call(t,"constructor")&&!Object.prototype.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var n;for(n in t);return void 0===n||Object.prototype.hasOwnProperty.call(t,n)},extend:function(){var t,e,n,r,i,a,o=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[1]||{},s=2),"object"!=typeof o&&"function"===!this.type(o)&&(o={}),c===s&&(o=this,--s);c>s;s++)if(null!=(t=arguments[s]))for(e in t)n=o[e],r=t[e],o!==r&&(u&&r&&(this.isPlainObject(r)||(i=this.isArray(r)))?(i?(i=!1,a=n&&this.isArray(n)?n:[]):a=n&&this.isPlainObject(n)?n:{},o[e]=this.extend(u,a,r)):void 0!==r&&(o[e]=r));return o},type:function(t){for(var e=["Boolean","Number","String","Function","Array","Date","RegExp","Object"],n=0,r=e.length;r>n;n++)e["[object "+e[n]+"]"]=e[n].toLowerCase();return null==t?String(t):e[Object.prototype.toString.call(t)]||"object"},objectToParams:function(e){var n=[];return this.each(e||{},function(r,i){if(e.hasOwnProperty(r)){if("object"==typeof i)try{i=t.stringify(i)}catch(a){}n.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}}),n.join("&")},run_with_the_last:function(t,e){function r(t){return function(r,o){t==i&&(e&&e(r,o),a.length&&n.each(a,function(t,e){try{e&&e(r,o)}catch(n){}}),a=[])}}var i=0,a=[];return function(e,n){n&&a.push(n),t(e,r(++i))}}};return window.WalletCashierUtil=window.WalletCashierUtil||n}(),!function(){var t={checkTimer:null,isChecking:!1,taskList:[],checkValid:function(){var t=this;window.Zero&&window.Zero.stat?(this.canSendData=!0,this.doTask()):(this.canSendData=!1,this.checkTimer&&clearTimeout(this.checkTimer),this.checkTimer=setTimeout(function(){t.checkValid()},100))},doTask:function(){for(var t=0;t<this.taskList.length;t++){var e=this.taskList[t];this.send(e.type,e.params)}this.taskList=[],this.doTask=new Function},send:function(t,e){this.canSendData?window.Zero.stat.sendData(t,e):(this.taskList.push({type:t,params:e}),this.isChecking||(this.isChecking=!0,this.checkValid()))},sendUserAction:function(t){this.send("user_action",t)},sendPerformance:function(t){this.send("performance",t)},sendException:function(t){this.send("exception",t)},sendPageView:function(t){this.send("page_view",t)}};return window.WalletCashierStatisticCustom=t}(),!function(){function t(t){for(var e=0;e<i.length;e++)t.type?i[e](t.type,t.data):i[e](t)}function e(t){i.push(t)}function n(e){try{e=r.parse(e.slice(a.message_namespace.length))}catch(n){}t(e)}var r=(window.WalletCashierStatisticCustom||{},window.JSON),i=[],a={message_namespace:"fe_wallet_cashier_message_",navigator_namespace:"fe_wallet_cashier_navigator_",addNotice:e};return window.postMessage&&window.parent.postMessage?(a.sendNotice=function(t,e){try{window.parent.postMessage(a.message_namespace+r.stringify({type:t,data:e}),"*")}catch(n){}},window.addEventListener?window.addEventListener("message",function(t){n(t.data||{})},!1):window.attachEvent("onmessage",function(t){n(t.data||{})})):(navigator[a.message_namespace+"send"]=n,navigator[a.navigator_namespace+"send"]=new Function,a.sendNotice=function(t,e){var n=navigator[a.navigator_namespace+"send"];"function"==typeof n&&n(t,e)}),window.WalletCashierMessager=a}();var util=window.WalletCashierUtil,Messager=window.WalletCashierMessager,JSON=window.JSON,defaults={frameId:"wallet_cashier_iframe",width:"100%",data:"",containerId:"",height:"",asycSubmit:0,samePage:0,channelView:{contract:0},payCheckUrl:"",need_sign:1,message_namespace:"fe_wallet_cashier_message_",navigator_namespace:"fe_wallet_cashier_navigator_",onmessage:new Function},MessageTypeMap={update_order:{type:"updateOrder",data:"success"},pay_submit:{type:"pay",data:"submit"},pay_success:{type:"pay",data:"success"},pay_check:{type:"pay",data:"paycheck"},init_success:{type:"init",data:"success"}},ChannelCodeMap={"BAIFUBAO-PLATFORM":"bfb","ALIPAY-PLATFORM":"alipay","ALIPAY-PLATFORM-QR":"alipayqr","SUPER-WECHAT-QR":"wechat","YEEPAY-CARD-MOBILE":"mobile","AIBEI-PC-PHONE-CARD":"mobile","YEEPAY-CARD-GAME":"game","AIBEI-PC-GAME-CARD":"game","BAIFUBAO-AUTH-PAY":"contract","BAIFUBAO-PLATFORM-AUTH-SIGN":"contract"},Cashier=function(t){this.options=util.extend({},defaults,t),this.formatOptions(t),this.iframe=document.createElement("iframe"),this.iframe_created=!1,this.initMessage(),this.options.data&&this.updateOrder(this.options.data,!1)};Cashier.prototype={init:function(t){this.initOrderData||(this.initOrderData=t);var e=this.options;this.fixHeight=!e.height,this.formatHeight(e),Messager.message_namespace=e.message_namespace,Messager.navigator_namespace=e.navigator_namespace;var n="/epic/req/cashier";e.need_sign+""=="0"&&(n="/epic/req/nosigncashier");var r=this.iframe;r.id=e.frameId,r.setAttribute("frameborder","0"),r.setAttribute("border","0"),r.setAttribute("allowtransparency","yes"),r.setAttribute("marginwidth","0"),r.setAttribute("marginheight","0"),r.setAttribute("height","500px"),r.src="//zhifu.duxiaoman.com"+n+"?"+t+"&fe_options="+encodeURIComponent(JSON.stringify(e));var i={width:e.width,border:"0 none"};/^\d+$/.test(e.width+"")&&(i.width=e.width+"px"),this.height>0&&(i.height=this.height+"px"),r.style.cssText=function(){var t=[];return util.each(i,function(e,n){t.push(e+":"+n)}),t.join(";")}(),this.iframe_created||(this.iframe_created=!0,e.containerId?document.getElementById(e.containerId).appendChild(r):document.body.appendChild(r))},initMessage:function(){var t=this;Messager.addNotice(function(e,n){if("string"==typeof n&&(n=JSON.parse(n)),"resize"===e)t.formatHeight(n),t.height>0&&t.fixHeight&&(t.iframe.style.height=n.height+"px");else{var r=MessageTypeMap[e];if(r){if(r.option={result:r.data},"pay"===r.type){var i=n.channel;r.option.new_channel=i,r.option.channel=ChannelCodeMap[i]||i}t.options.onmessage.call(t,r)}}})},formatHeight:function(t){var e=parseInt(t.height+"",10);this.height=e?e:0},formatOptions:function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){t={}}t=util.extend({},this.options,t),t.asycSubmit=parseInt(t.asycSubmit,10),t.samePage=parseInt(t.samePage,10),"string"==typeof t.channelView&&(t.channelView=JSON.parse(t.channelView)),this.options=t},updateOrder:function(t,e){var n=util.getQueryString(t);this.formatOptions(n.feData),this.options.is_update_order="boolean"==typeof e?e:1,n.feData&&delete n.feData,this.options.asycSubmit&&this.options.payCheckUrl?(this.options.check_param=util.extend({},n),n.orderCreateTime&&delete n.orderCreateTime,n=util.extend({},util.getQueryString(this.initOrderData),n),this.init(util.objectToParams(n))):this.init(t.replace(/(&feData=).*&$|(&feData=).*/g,""))}},window.lbscashier=Cashier}();