(function(e,t){if(typeof exports==="object"){module.exports=t()}else if(typeof define==="function"&&define.amd){define(t)}else{e.shareConfig=t()}})(this,function(){var e=navigator.userAgent;var t=/micromessenger\//i.test(e);var n=/ baiduboxapp\//i.test(e);var i=/\bqq\b/i.test(e);var o=/\bweibo\b/i.test(e);var r=function(){};var a=location.protocol;var c=location.href;var s="百度App";var l="百度App";var f="https://b.bdstatic.com/searchbox/icms/searchbox/img/po/act/newuserredpack/box_logo.png";var u;function p(e,t){var n,i;for(n in e){if(e.hasOwnProperty(n)){i=t.call(e,n,e[n]);if(i===false){break}}}}function d(e){if(typeof e==="string"){return e}var t=[];for(var n in e){t.push(n+"="+e[n])}return t.join("&")}function m(e){return e.replace(/^\s+/,function(){return""}).replace(/\s+$/,function(){return""})}function w(e){var t=document.head||document.getElementsByTagName("head")[0]||document.documentElement;var n=document.createElement("script");n.type="text/javascript";var i,o,a,c,s;i=e.url;o=e.data;a=e.success||r;c=e.error||r;s=e.timeout||2e4;if(typeof o==="object"){o=d(o)}if(o){i+=(i.indexOf("?")===-1?"?":"&")+o}i=i.replace(/[&?]{1,2}/,"?");var l;if(/=\?/.test(i)){l="_box_jsonp"+Date.now();i=i.replace(/=\?/,"="+l)}n.src=i;var f=true,u;var p=function(){if(l){delete window[l]}u&&clearTimeout(u);n.onload=n.onreadystatechange=n.onerror=null;n=null};var m=function(e,t){if(n&&(!n.readyState||/loaded|complete/.test(n.readyState))){p();if(f&&typeof a==="function"){a.apply(null,[].slice.call(arguments))}f=false}};var w=function(e){p();if(f){c(e)}f=false};if(l){window[l]=m}u=setTimeout(function(){p();if(f){c("timeout")}f=false},s);n.onload=n.onreadystatechange=n.onerror=m;n.onerror=w;t.appendChild(n)}function g(e){if(e.nodeType!==1){return""}var t=e.innerHTML.replace(/\n/gim,function(){return""}).replace(/<script.*?script>/gim,function(){return""}).replace(/(<.*?>)|(<script>.*?<\/script>)/gim,function(){return""});return m(t)}function h(e,t){var n=document.getElementsByTagName("img");var i,o;var r=n.length;r=r<=10?r:10;for(i=0;i<r;i++){o=n[i];(function(t){var n=document.createElement("img");n.src=t;n.onload=function(){if(n.width>290&&n.height>290){e(n.src)}}})(o.src)}setTimeout(function(){e(t)},1e3)}function b(e,t){if(Math.random()<=.95&&c.indexOf("share_config_random=1")<0){return}if(!e||!t){return}t=encodeURIComponent(t);var n="300_001";var i="//m.baidu.com/tcbox?service=bdbox&action=pblog&data="+encodeURIComponent(JSON.stringify({appid:1,dataid:2,cateid:26,actionid:2,actiontype:"0",actiondata:{type:0,timestamp:Date.now(),content:{page_id:n,logtype:3,type:"c_"+e,msg:t}}}));var o="//ispeed.baidu.com/e.gif?t="+Date.now()+"&page_id="+n+"&evt=c_"+e+"&msg="+t;var r=[a+i,a+o];r.forEach(function(e){var t=document.createElement("img");t.onload=t.onerror=t.onabort=function(){t=null};t.src=e})}function x(e,o,r){var s=!!e.debug;if(n){delete e.wx;var l=e.bdbox||{};if(!l.source){b("no_bdbox_source",c);if(s){alert("使用手百分享必须配置 source 参数")}return}var f={type:"url",mediaType:"all",linkUrl:c,source:l.source};for(var u in e){if(u!=="bdbox"){f[u]=e[u]}}window["__BdboxShare_success__"]=o||console.log;window["__BdboxShare_fail__"]=r||console.log;window.BoxShareData={options:f,successcallback:"__BdboxShare_success__",errorcallback:"__BdboxShare_fail__"}}else if(t||i){delete e.bdbox;e.wx=e.wx||{};e.wx.appId=e.wx.appId||"wxadc1a0c6b9096e89";e.wx.jsApiList=e.wx.jsApiList||[];e.wx.jsApiList=e.wx.jsApiList.concat(["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]);w({url:a+"//po.baidu.com/api/wechat/token.jsonp",data:{app_id:e.wx.appId,url:encodeURIComponent(c),callback:"?",ts:Date.now()},success:function(n){if(n.errno!=0){b("wx_gettoken_err",c);if(s){alert("获取签名的接口错误："+n.errmsg)}return}var a=n.data||{};if(t){wx.config({debug:s,jsApiList:e.wx.jsApiList,appId:a.appId,nonceStr:a.nonceStr,timestamp:a.timestamp,signature:a.signature});var l={title:e.title,desc:e.content,link:e.linkUrl,imgUrl:e.iconUrl,success:function(){o&&o()},cancel:function(){r&&r()}};wx.ready(function(){wx.onMenuShareTimeline(l);wx.onMenuShareAppMessage(l);wx.onMenuShareQQ(l);wx.onMenuShareWeibo(l);wx.onMenuShareQZone(l)})}if(i){setShareInfo({title:e.title,summary:e.content,pic:e.iconUrl,url:e.linkUrl,WXconfig:{swapTitleInWX:false,appId:a.appId,timestamp:a.timestamp,nonceStr:a.nonceStr,signature:a.signature}})}}})}}function v(e,n,o){if(typeof e!=="object"){console.log("shareConfig.init 参数错误");return}u=e;var r=!!e.debug;if(t&&!window.wx){if(r){alert("微信 SDK 未加载完成")}return}if(i&&!window.setShareInfo){if(r){alert("QQ SDK 未加载完成")}return}if(!e.titleDefault){e.titleDefault=s}if(!e.contentDefault){e.contentDefault=l}if(!e.iconUrlDefault){e.iconUrlDefault=f}if(!e.title){e.title=m(document.title);if(!e.title){e.title=e.titleDefault}}if(!e.linkUrl){e.linkUrl=c}if(!e.content){e.content=document.body}if(e.content.nodeType===1){e.content=g(e.content)}if(!e.content||typeof e.content!=="string"){e.content=e.contentDefault}if(e.content.length>50){e.content=e.content.slice(0,50)+"..."}var a=false;if(!e.iconUrl){h(function(t){if(a){return}a=true;e.iconUrl=t;x(e,n,o)},e.iconUrlDefault)}else{x(e,n,o)}}return{init:function(){var e=arguments;if(t){if(window.wx){v.apply(this,e)}else{w({url:a+"//res.wx.qq.com/open/js/jweixin-1.0.0.js",success:function(){v.apply(this,e)},error:function(){b("load_wxsdk_err",c)}})}}else if(i){if(window.setShareInfo){v.apply(this,e)}else{w({url:a+"//qzonestyle.gtimg.cn/qzone/qzact/common/share/share.js",success:function(){v.apply(this,e)},error:function(){b("load_qqsdk_err",c)}})}}else{v.apply(this,e)}},update:function(e){if(!u){return}p(u,function(t,n){if(e[t]==null){e[t]=n}});if(t){if(window.wx){v.call(this,e)}}else if(i){if(window.setShareInfo){v.call(this,e)}}else{v.call(this,e)}}}});